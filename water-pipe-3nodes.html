<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Simple water pipe system with 3 nodes</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h2>2.1. Simple water pipe system with 3 nodes</h2>

    <p>This model employs nonlinear algebraic equations (NLEs) to describe fluid flow through two connected pipes between three nodes.</p>


    <h3>Task Overview</h3>
    <p>The task of this model is to simulate the hydraulic behavior of a simple pipeline system consisting
        of three nodes through which water flows. The model enables the calculation of pressures at nodes
        2 and 3, as well as the flow rates between nodes, taking into account the known pressure at node 1
        and pipe parameters such as length, diameter, and friction.</p>

    <h3>Task objective:</h3>
    <p>The objective is to analyze the flow distribution and pressure drops along the pipeline system.</p>

    <h3>Program Analysis:</h3> 
    <p>Definition of the analyzed model:</p>

    <div class="code-block">
       Model [type=NL, domain=real, name="Water pipe system"]:
    </div>
        <p><strong>type</strong> = "NL" – defines the model as nonlinear</p>
        <p><strong>name</strong> = "Water pipe system" – the model’s designated name.</p>
        <p><strong>domain</strong> = real" – specifies that all variables and parameters belong to the real domain.</p>

    <p>Block <strong>Vars</strong>:</p>
    <div class="code-block">
        Vars [out=true]:
            p2=p1-10000		// Initial value for pressure on the second node 
            p3=p1-20000		// Initial value for pressure on the third node 
            Q12=0		// Flow from node 1 to node 2 (calculated in postprocessing) 
            Q23=0		// Flow from node 2 to node 3 (calculated in postprocessing) 	
    </div>

    <p>Block <strong>Params</strong></p>
    <div class="code-block">
        Params:
            p1=500*1000 [out=true]		// Known presure at node 1 
            D=100/1000		// Pipe diameter in mm
            L=1000		// Pipe lengtth 
            f=0.02		// Pipe friction 
            rho=1000		// Fluid density 
            C=sqrt((pi^2*D^5)/(8*f*rho*L))		// The conductance coefficient 
            Q2=2/1000		// Flow injected at node 2 in l/s 
            Q3=-10/1000		// Flow injected at node 3 in /s 
    </div>

    <p>The functions of the <i>Vars</i> and <i>Params</i> blocks were explained in <a href="nonlinear-real.html">example 1</a>.</p>

    <p>Block <strong>NLEs</strong>:</p>
    
    <div class="code-block">
        NLEs:
            Q12=sign(p1-p2)*C*sqrt(abs(p1-p2))
            Q23=sign(p2-p3)*C*sqrt(abs(p2-p3))
            Q12+Q2-Q23=0		// Flow conservation at node 2 
            Q23+Q3=0		// Flow conservation at node 3 
    </div>

    <p>The function of the NLEs block was explained in <a href="nonlinear-complex.html">examples 2</a>.
        This block contains the nonlinear equations that describe the analyzed system.</p>

    <p>The keyword <strong>end</strong> signifies the termination of the model definition</p>
    <div class="code-block">
        end // end of Model
    </div>

    <p>The simulation results obtained after running the analyzed model are presented. </p>
        
    <p>The window shown in picture  2.1.1 appears after program execution and provides information on
        whether the simulation was successfully completed.</p>

    <div class="figure">
        <img src="img/z18.jpg" alt="Figure 1.1">
        <div class="caption">Figure 2.1.1: Code execution status information</div>
    </div>

    <p>Figure 2.1.2 presents the visualization window for displaying results. It is evident from the figure
        that multiple graphs can be displayed simultaneously, each containing one or more variables.</p>

    <div class="figure">
        <img src="img/z17.jpg" alt="Figure 1.2" width="800" height="600">
        <div class="caption">Figure 2.1.2: Interface for entering visualization code</div>
    </div>

    <p> The following figures show the results of the code execution from picture 2.1.2.
        The green line represents the logarithmic value of the error over time. 
        The flow rates Q12 and Q23 are depicted in blue and red, respectively, as functions of time, while the pressures p2 and p3 are 
        shown in magenta and black, respectively, also as functions of time.</p>

    <div class="image-group">
        
        <img src="img/z21.jpg" alt="2" width="400" height="200">
        <img src="img/z22.jpg" alt="3" width="400" height="200">
        <img src="img/z23.jpg" alt="4" width="400" height="200">
        <img src="img/z24.jpg" alt="5" width="400" height="200">
        <img src="img/z20.jpg" alt="1" width="400" height="200">
    </div>

    <p>Numerical results after executing the program are shown in the figure 2.1.4</p>


    <div class="figure">
        <img src="img/z19.jpg" alt="Figure 1.4">
        <div class="caption">Figure 2.1.3: Numerical simulation results</div>
    </div>
</body>
</html>
